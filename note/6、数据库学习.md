# 数据库

## SQL（结构化查询语言）

SQL定义了操作所有关系型数据库

SQL分类

1、DDL	数据定义语言，定义数据库对象，表，列等。

2、DML	数据操作语言，用于对数据库表中数据增删改

3、DQL	数据查询语言，用于查询数据库中表的记录

4、DCL	数据控制语言，用于定义数据库的访问权限和安全级别



### DDL：操作数据库、表

1. #### 操作数据库：CRUD

   1. ##### C(Create)：创建

      1. 创建数据库：create database 数据库名称;
      2. 创建数据库，判断不存在，再创建：create database if not exists 数据库名称;
      3. 创建数据库，并指定字符集：create database 数据库名称 character set 字符集名;
      4. 练习，创建db4数据库，判断是否存在，并指定字符集为gbk
         * create database if not exists db4 character set gbk;

   2. ##### R(Retrieve)：查询

      1. 查询所有的数据库名称：show databases;
      2. 查询某个数据库的字符集：show create database 数据库名称;

   3. ##### U(Update)：修改

      1. 修改数据库的字符集：alter database 数据库名称 character set 字符集;

   4. ##### D(Delete)：删除

      1. 删除数据库：drop database 数据库名称;
      2. 判断数据库存在，存在再删除：drop database if exists 数据库名称;

   5. ##### 使用数据库

      1. 查询当前正在使用数据库名称：select database();
      2. 使用数据库：use 数据库名称;

2. #### 操作表

   1. ##### C(Create)：创建

      1. 语法：

         create table 表名(

         ​	列名1   数据类型1,

         ​	列名2   数据类型2,

         ​	......

         ​	列名n   数据类型n

         )

         * 注意：最后一列，不需要加逗号

         * 数据库类型：
           1. int：整数类型：age int,
           2. double：浮点型：score double(5,2)  #长度为5，小数点后两位的浮点型
           3. date：日期，只包含年月日 #yy-MM-dd
           4. datetime:日期时间，包括年月日时分秒 #yy-MM-dd HH:mm:ss
           5. timestamp:时间戳类型，包括年月日时分秒 #yy-MM-dd HH:mm:ss
              * 如果将来不给这个字段赋值，或者赋值为null，则默认赋值当前系统时间。
           6. varchar：字符串：name varchar(20)  #姓名最大20个字符

      2. 创建一个表

         ```sql
         create table student(
         	id int,
             name varchar(32),
             age int,
             score double(4,1),
             birthday date,
             inser_time timestamp
         );
         
         /*使用desc student查询表结构
         +------------+-------------+------+-----+---------+-------+
         | Field      | Type        | Null | Key | Default | Extra |
         +------------+-------------+------+-----+---------+-------+
         | id         | int(11)     | YES  |     | NULL    |       |
         | name       | varchar(32) | YES  |     | NULL    |       |
         | age        | int(11)     | YES  |     | NULL    |       |
         | score      | double(4,1) | YES  |     | NULL    |       |
         | birthday   | date        | YES  |     | NULL    |       |
         | inser_time | timestamp   | YES  |     | NULL    |       |
         +------------+-------------+------+-----+---------+-------+
         */
         ```

      3. 复制一个表：create table 表名 like 被复制的表名;      #create table stu like student;

   2. ##### R(Retrieve)：查询

      1. 查询某个数据库中所有表的名称：show tables;
      2. 查询表结构：desc 表名;

   3. ##### U(Update)：修改

      1. 修改表名：alter table 表名 rename to 新的表名;
      2. 修改表的字符集：alter table 表名character set 新的表名;
      3. 添加一列：alter table 类名 add 列名 数据类型;
      4. 修改列名、数据类型
         1. alter table 表名 change 列名 新列名 新数据类型
         2. alter table 表名 modify 列名 新数据类型
      5. ​	删除列：alter table 表名 drop 列名;

   4. ##### D(Delete)：删除

      1. drop table 表名;
      2. drop table if exists 表名;